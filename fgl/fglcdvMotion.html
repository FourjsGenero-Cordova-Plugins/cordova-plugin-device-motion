<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--don't touch - generated by xa2html.xsl--><html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>API - fglcdvMotion</title>
<link rel="stylesheet" type="text/css" href="../fgldoc.css">
</head>
<body>
<a id="top"></a><span><table BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY=""><tr>
<td><a href="../overview-summary.html">Overview</a></td>
<td><a href="package-summary.html">Package</a></td>
<td><b>Class</b></td>
<td><a href="../index-all.html">Index</a></td>
<td><a href="#top" target="_top">No Frames</a></td>
<td><a href="../index.html" target="_top">Frames</a></td>
<td>Prev</td>
<td>Next</td>
</tr></table>
<br><small>Summary: <a href="#type_summary">TYPE</a> <a href="#function_summary">FUNCTION</a></small><hr>
<b>fgl</b><h1>fglcdvMotion</h1>
<p> Genero BDL wrapper around the Cordova Accelerometer plugin.</p>
<p> For device motion capture, we cannot use the cordovacallback action, because
 it would generate too much traffic (the app would not respond anymore).
 Instead, we use async Cordova calls and fetch the data with callback methods.</p>
<a id="type_summary"></a><table border="1" width="100%" cellpadding="3" cellspacing="0" class="summary">
<tr><th class="summary" colspan="1">TYPE Summary</th></tr>
<tr><td class="summary-text">
<b><a href="#MotionDataArrayT">MotionDataArrayT</a></b> DYNAMIC ARRAY OF  <a href="#MotionDataT">MotionDataT</a><br> The MotionDataArrayT type defins a dynamic array of motion data records.</td></tr>
<tr><td class="summary-text">
<b><a href="#MotionDataT">MotionDataT</a></b> RECORD &lt;anonymous fglcdvMotion R1&gt;<br> The MotionDataT type contains motion capture data.</td></tr>
</table>
<br><a id="function_summary"></a><table border="1" width="100%" cellpadding="3" cellspacing="0" class="summary">
<tr><th class="summary" colspan="2">FUNCTION Summary</th></tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#finalize">finalize</a></b>()<br> Finalizes the plugin library</td>
</tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#getFetchTime">getFetchTime</a></b>() RETURNS INTERVAL SECOND TO FRACTION<br> Returns the time it took to fetch motion data with getNextData().</td>
</tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#getNextData">getNextData</a></b>(mda <a href="#MotionDataArrayT">MotionDataArrayT</a>) RETURNS INTEGER<br> Fetches next motion data records.</td>
</tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#initialize">initialize</a></b>()<br> Initializes the plugin library</td>
</tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#isStarted">isStarted</a></b>() RETURNS BOOLEAN<br> Returns TRUE if the motion capture has started.</td>
</tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#start">start</a></b>() RETURNS INTEGER<br> Start to capture motion data.</td>
</tr>
<tr>
<td class="summary-text"></td>
<td class="summary-text">
<b><a href="#stop">stop</a></b>() RETURNS INTEGER<br> Stop capture of motion data.</td>
</tr>
</table>
<br><h2>Types</h2>
<a id="MotionDataArrayT"> </a><h3>MotionDataArrayT</h3>
<tt>TYPE <b>MotionDataArrayT</b> DYNAMIC ARRAY OF  <a href="#MotionDataT">MotionDataT</a></tt><dl>
<dd>
<p> The MotionDataArrayT type defins a dynamic array of motion data records.</p>
<p> This type is used by the getNextData() function to return motion data.</p>
</dd>
<dd><dl></dl></dd>
</dl>
<hr>
<a id="MotionDataT"> </a><h3>MotionDataT</h3>
<tt>TYPE <b>MotionDataT</b> RECORD &lt;anonymous fglcdvMotion R1&gt;<table border="0" cellpadding="0" cellspacing="0" class="member"><tr>
<td>    </td>
<td><table border="0" cellpadding="0" cellspacing="0" class="member">
<tr><td>x FLOAT</td></tr>
<tr><td>y FLOAT</td></tr>
<tr><td>z FLOAT</td></tr>
<tr><td>timestamp FLOAT</td></tr>
</table></td>
</tr></table> END RECORD</tt><dl>
<dd>
<p> The MotionDataT type contains motion capture data.</p>
<p> The MotionDataT structure contains accelerometer data captured at a specific
 point in time.</p>
<p> Acceleration values include the effect of gravity (9.81 m/s^2), so that when
 a device lies flat and facing up, x, y, and z values returned should be 0,
 0, and 9.81.</p>
<p> The timestamp member is a FLOAT representing the number of milliseconds
 since epoch (1970-01-01). Such value can be converted to a DATETIME with</p>
<p>
      <span><pre> util.Datetime.fromSecondsSinceEpoch( timestamp / 1000 )</pre></span>
    </p>
<p> Record members are:</p>
<p>  x FLOAT : Amount of acceleration on the x-axis (in m/s^2)</p>
<p>  y FLOAT : Amount of acceleration on the y-axis (in m/s^2)</p>
<p>  z FLOAT : Amount of acceleration on the z-axis (in m/s^2)</p>
<p>  timestamp FLOAT : Motion data record creation timestamp in milliseconds</p>
</dd>
<dd><dl></dl></dd>
</dl>
<hr>
<h2>Functions</h2>
<a id="finalize"> </a><h3>finalize</h3>
<tt>FUNCTION <b>finalize</b>()</tt><dl>
<dd>
<p> Finalizes the plugin library</p>
<p> The finalize() function should be called when the library is no longer used.</p>
</dd>
<dd><dl></dl></dd>
</dl>
<hr>
<a id="getFetchTime"> </a><h3>getFetchTime</h3>
<tt>FUNCTION <b>getFetchTime</b>() RETURNS INTERVAL SECOND TO FRACTION</tt><dl>
<dd><p> Returns the time it took to fetch motion data with getNextData().</p></dd>
<dd><dl>
<dt><b>Returns:</b></dt>
<dd>the fetch time.<br>
</dd>
</dl></dd>
</dl>
<hr>
<a id="getNextData"> </a><h3>getNextData</h3>
<tt>FUNCTION <b>getNextData</b>(mda <a href="#MotionDataArrayT">MotionDataArrayT</a>) RETURNS INTEGER</tt><dl>
<dd>
<p> Fetches next motion data records.</p>
<p> Use this function to retrieve motion data records into the dynamic array
 passed as parameter.</p>
<p> The function returns the number of records found or -1 in case of error.</p>
<p> You typically want to call this function in regular intervals, once the
 motion capture is started, for example in on ON IDLE trigger.</p>
<p>
      <span><pre> DEFINE mda fglcdvMotion.MotionDataArrayT,
        i, cnt INTEGER
 LET cnt = fglcdvMotion.getNextData( mda )
 FOR i=1 TO cnt
     DISPLAY mda[x].*
 END FOR</pre></span>
    </p>
</dd>
<dd><dl>
<dt><b>Parameters:</b></dt>
<dd>
<code>mda</code> - - is the dynamic array of motion data records to fill.<br>
</dd>
<dt><b>Returns:</b></dt>
<dd>-1 if error, &gt;=0 the number of motion data records fetched.<br>
</dd>
</dl></dd>
</dl>
<hr>
<a id="initialize"> </a><h3>initialize</h3>
<tt>FUNCTION <b>initialize</b>()</tt><dl>
<dd>
<p> Initializes the plugin library</p>
<p> The initialize() function must be called prior to other calls.</p>
</dd>
<dd><dl></dl></dd>
</dl>
<hr>
<a id="isStarted"> </a><h3>isStarted</h3>
<tt>FUNCTION <b>isStarted</b>() RETURNS BOOLEAN</tt><dl>
<dd><p> Returns TRUE if the motion capture has started.</p></dd>
<dd><dl>
<dt><b>Returns:</b></dt>
<dd>TRUE if motion capture is started.<br>
</dd>
</dl></dd>
</dl>
<hr>
<a id="start"> </a><h3>start</h3>
<tt>FUNCTION <b>start</b>() RETURNS INTEGER</tt><dl>
<dd>
<p> Start to capture motion data.</p>
<p> This function starts to collect accelerometer motion data.
 Once started, it is possible to fetch the motion data with getNextData(),
 or stop the capture with stop().</p>
</dd>
<dd><dl>
<dt><b>Returns:</b></dt>
<dd>0 upon success, -1 in case of error<br>
</dd>
</dl></dd>
</dl>
<hr>
<a id="stop"> </a><h3>stop</h3>
<tt>FUNCTION <b>stop</b>() RETURNS INTEGER</tt><dl>
<dd>
<p> Stop capture of motion data.</p>
<p> This function stops collecting accelerometer motion data.
 After the stop, it is possible to fetch the motion data with getNextData(),
 or restart the capture with start().</p>
</dd>
<dd><dl>
<dt><b>Returns:</b></dt>
<dd>0 upon success, -1 in case of error<br>
</dd>
</dl></dd>
</dl>
<hr>
<table BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY=""><tr>
<td><a href="../overview-summary.html">Overview</a></td>
<td><a href="package-summary.html">Package</a></td>
<td><b>Class</b></td>
<td><a href="../index-all.html">Index</a></td>
<td><a href="#top" target="_top">No Frames</a></td>
<td><a href="../index.html" target="_top">Frames</a></td>
<td>Prev</td>
<td>Next</td>
</tr></table></span>
</body>
</html>
